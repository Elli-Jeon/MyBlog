---
title: "[React] Login과 관련된 개념"
tags: ["react"]
published: true
date: "2021-08-21"
---

# 로그인 프로세스를 이해하는데에 필요한 개념 정리

## 1. 쿠키, 세션, 캐시, 스토리지

- 쿠키 : 컴퓨터에 저장되는 작은 기록, 정보 파일 (개인 소장용 방문일지)
- 세션 : 서버쪽에 저장되는 정보 파일
- 웹 캐시 : 이미지 같은 용량이 큰 파일을 그때그때 서버에서 가져오면 부하가 심하니 따로 공간을 마련해서 컴퓨터에 저장

- 로컬 스토리지, 세션 스토리지 : 둘 다 HTML 5에 도입된 간단한 키와 값을 저장할 수 있는 저장소. window 객체로 접근 가능

|               |               로컬스토리지                |      세션스토리지       |
| ------------- | :---------------------------------------: | :---------------------: |
| 데이터 영구성 |      사용자가 지우지 않는 이상 영구       | 윈도우, 탭 닫을 시 제거 |
| 사용 방법     |                자동 로그인                |      일회성 로그인      |
| 주의 사항     | 비밀번호와 같은 중요한 정보는 절대 저장 X |

---

## 2. 로그인 정보의 저장

- 절대 로컬 스토리지, 세션 스토리지에는 jwt token이 저장되면 안됨. XSS 공격에 매우 취약
- jwt token을 하나만 사용할 경우 이를 탈취하여 사용 가능

따라서 access token, refresh token 두 가지의 토큰을 생성해내고 refresh token을 secure, httpOnly 쿠키로, access token을 json body로 보내서웹 앱 내 로컬변수로 저장하여 사용

클라이언트는 set cookie에 http only 태그가 달려있어서 접근이 불가능. 요 쿠키는 특정 api와 통신시에 자동으로 달림(?) 그렇기에 요 토큰이 만료되기 전까지는 계속 통신하면서 access token을 header bearer에 담아 보내면 됨

<a href="https://velog.io/@yaytomato/%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%90%EC%84%9C-%EC%95%88%EC%A0%84%ED%95%98%EA%B2%8C-%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EC%B2%98%EB%A6%AC%ED%95%98%EA%B8%B0" target="_blank">전체 프로세스 참조 사이트 1</a>

<a href="https://tansfil.tistory.com/59">token에 대한 참조 사이트 2</a>
